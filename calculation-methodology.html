<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proctor Test Calculation Methodology</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1, h2, h3 { 
            color: #2c3e50; 
            margin-top: 1.5em;
            page-break-after: avoid;
        }
        h1 { 
            text-align: center; 
            border-bottom: 2px solid #3498db; 
            padding-bottom: 10px; 
        }
        .section { 
            margin: 30px 0; 
            padding: 20px; 
            background-color: #f9f9f9; 
            border-radius: 5px;
            page-break-inside: avoid;
        }
        .formula { 
            background-color: #f0f8ff; 
            padding: 15px; 
            margin: 10px 0; 
            border-left: 4px solid #3498db;
            font-family: "Times New Roman", Times, serif;
            page-break-inside: avoid;
        }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 20px 0;
            page-break-inside: avoid;
        }
        th, td { 
            border: 1px solid #ddd; 
            padding: 12px; 
            text-align: left; 
        }
        th { 
            background-color: #3498db; 
            color: white; 
        }
        .example { 
            background-color: #e8f5e9; 
            padding: 15px; 
            margin: 10px 0; 
            border-left: 4px solid #4caf50;
            page-break-inside: avoid;
        }
        .note { 
            background-color: #fff3e0; 
            padding: 15px; 
            margin: 10px 0; 
            border-left: 4px solid #ff9800;
            page-break-inside: avoid;
        }
        .variable-list {
            column-count: 2;
            column-gap: 40px;
            margin: 20px 0;
        }
        .variable-item {
            break-inside: avoid;
            margin-bottom: 10px;
        }
        @media print {
            body { padding: 20px; }
            .section { 
                border: 1px solid #ddd;
                margin: 20px 0;
            }
            th {
                background-color: #3498db !important;
                color: white !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <h1>Proctor Test Calculation Methodology</h1>

    <div class="section">
        <h2>1. Introduction</h2>
        <p>This document provides a comprehensive explanation of the calculation methodology used in the Proctor Test analysis system. The calculations follow ISO/IEC 17025:2017 requirements for testing laboratories and incorporate statistical methods for precision and uncertainty evaluation.</p>
        
        <div class="note">
            <p><strong>Document Purpose:</strong></p>
            <ul>
                <li>Provide transparency in calculation procedures</li>
                <li>Support method validation requirements</li>
                <li>Enable independent verification of results</li>
                <li>Demonstrate compliance with ISO/IEC 17025:2017</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>2. Variables and Definitions</h2>
        
        <div class="variable-list">
            <div class="variable-item">
                <strong>MDD (g/cm³)</strong>: Maximum Dry Density
            </div>
            <div class="variable-item">
                <strong>OMC (%)</strong>: Optimum Moisture Content
            </div>
            <div class="variable-item">
                <strong>sr</strong>: Repeatability standard deviation
            </div>
            <div class="variable-item">
                <strong>sR</strong>: Reproducibility standard deviation
            </div>
            <div class="variable-item">
                <strong>sL</strong>: Between-laboratory standard deviation
            </div>
            <div class="variable-item">
                <strong>n</strong>: Number of measurements
            </div>
            <div class="variable-item">
                <strong>k</strong>: Coverage factor
            </div>
            <div class="variable-item">
                <strong>ν</strong>: Degrees of freedom
            </div>
            <div class="variable-item">
                <strong>U</strong>: Expanded uncertainty
            </div>
            <div class="variable-item">
                <strong>uc</strong>: Combined standard uncertainty
            </div>
            <div class="variable-item">
                <strong>r</strong>: Repeatability limit
            </div>
            <div class="variable-item">
                <strong>R</strong>: Reproducibility limit
            </div>
        </div>
    </div>

    <div class="section">
        <h2>3. Step-by-Step Calculation Procedure</h2>

        <h3>3.1 Basic Statistical Parameters</h3>
        <div class="formula">
            <p><strong>Step 1: Calculate Mean MDD</strong></p>
            <p>x̄ = (∑xᵢ) / n</p>
        </div>

        <h3>3.2 Precision Parameters</h3>
        <div class="formula">
            <p><strong>Step 2: Calculate Repeatability Standard Deviation (sr)</strong></p>
            <p>sr = √(MS_within)</p>
            
            <p><strong>Step 3: Calculate Between-Laboratory Standard Deviation (sL)</strong></p>
            <p>sL = √[max(0, (MS_between - MS_within) / n₀)]</p>
            <p>where n₀ is the average number of tests per group.</p>

            <p><strong>Step 4: Calculate Reproducibility Standard Deviation (sR)</strong></p>
            <p>sR = √(sr² + sL²)</p>

            <p><strong>Step 5: Calculate Repeatability and Reproducibility Limits</strong></p>
            <p>r = t * √2 * sr</p>
            <p>R = t * √2 * sR</p>
            <p>where t is the t-distribution value for the given confidence level and degrees of freedom.</p>
        </div>

        <div class="example">
            <p><strong>Example Calculation:</strong></p>
            <p>Given measurements from a between-lab study:</p>
            <table>
                <tr><th>Lab</th><th>MDD (g/cm³)</th></tr>
                <tr><td>A</td><td>1.922, 1.935</td></tr>
                <tr><td>B</td><td>1.928, 1.941</td></tr>
                <tr><td>C</td><td>1.915, 1.921</td></tr>
            </table>
            <p>Results from ANOVA:</p>
            <ul>
                <li>Mean MDD = 1.927 g/cm³</li>
                <li>MS_within = 0.000081 (so sr = 0.009)</li>
                <li>MS_between = 0.00024 (so sL = 0.0079)</li>
                <li>sR = √(0.009² + 0.0079²) = 0.012 g/cm³</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>4. Uncertainty Evaluation</h2>

        <h3>4.1 Equipment Uncertainty</h3>
        <div class="formula">
            <p><strong>Step 6: Calculate Balance Uncertainty</strong></p>
            <p>u_balance = √[(U_cert/k)² + (Resolution/2√3)²]</p>
            
            <p><strong>Step 7: Calculate Caliper/Mold Uncertainty</strong></p>
            <p>u_caliper = √[(U_cert/k)² + (Resolution/2√3)²]</p>
            
            <p><strong>Step 8: Calculate Combined Equipment Uncertainty</strong></p>
            <p>u_equip = √(u_balance² + u_caliper²)</p>
        </div>

        <h3>4.2 Combined and Expanded Uncertainty</h3>
        <div class="formula">
            <p><strong>Step 9: Calculate Combined Standard Uncertainty (uc)</strong></p>
            <p>uc = √(u_repro² + u_equip²)</p>
            <p>Note: The reproducibility uncertainty (u_repro) is the reproducibility standard deviation (sR).</p>
            
            <p><strong>Step 10: Calculate Effective Degrees of Freedom (νeff)</strong></p>
            <p>νeff = (uc⁴) / [(u_repro⁴/ν_repro) + (u_equip⁴/ν_equip)]</p>
            
            <p><strong>Step 11: Calculate Expanded Uncertainty (U)</strong></p>
            <p>U = k × uc</p>
            <p>where k is determined from t-distribution for νeff at 95% confidence level.</p>
        </div>
    </div>

    <div class="section">
        <h2>5. ANOVA Calculations</h2>
        
        <div class="formula">
            <p><strong>Step 12: Calculate Sum of Squares and Mean Squares</strong></p>
            <table>
                <tr><th>Source</th><th>Sum of Squares (SS)</th><th>DOF</th><th>Mean Square (MS)</th></tr>
                <tr><td>Between Groups</td><td>SSB = ∑nⱼ(x̄ⱼ - x̄)²</td><td>p - 1</td><td>MSB = SSB / (p-1)</td></tr>
                <tr><td>Within Groups</td><td>SSW = ∑∑(xᵢⱼ - x̄ⱼ)²</td><td>N - p</td><td>MSW = SSW / (N-p)</td></tr>
            </table>
            
            <p><strong>Step 13: Calculate F-statistic</strong></p>
            <p>F = MSB / MSW</p>
        </div>
    </div>

    <div class="section">
        <h2>6. Validation Criteria</h2>
        
        <h3>6.1 Input Validation</h3>
        <ul>
            <li>Maximum Dry Density (MDD): 0 < MDD ≤ 3.0 g/cm³</li>
            <li>Compaction Points: 4 ≤ points ≤ 10</li>
        </ul>

        <h3>6.2 Statistical Validation</h3>
        <ul>
            <li>Minimum of 3 test results for precision analysis.</li>
            <li>Valid and traceable equipment calibration certificates.</li>
            <li>Data should be checked for normality and homogeneity of variances.</li>
        </ul>

        <div class="note">
            <p><strong>Validation Notes:</strong> Deviations from these criteria must be documented and justified. Regular verification of calculations is performed using check standards.</p>
        </div>
    </div>

    <div class="section">
        <h2>7. References and Standards</h2>
        <ul>
            <li>ISO/IEC 17025:2017 - General requirements for the competence of testing and calibration laboratories</li>
            <li>ASTM D698 - Standard Test Methods for Laboratory Compaction Characteristics of Soil</li>
            <li>JCGM 100:2008 (GUM) - Evaluation of measurement data - Guide to the expression of uncertainty in measurement</li>
            <li>ISO 5725 - Accuracy (trueness and precision) of measurement methods and results</li>
        </ul>
    </div>

    <div class="section">
        <h2>8. Document Control</h2>
        <table>
            <tr><th>Version</th><th>Date</th><th>Description</th></tr>
            <tr><td>1.0</td><td>2024-03-21</td><td>Initial documentation of calculation methodology.</td></tr>
            <tr><td>1.1</td><td>2024-07-23</td><td>Updated formulas for sL, r, and R to align with implementation. Clarified u_repro.</td></tr>
        </table>
    </div>
</body>
</html>